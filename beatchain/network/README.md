# Beatchain Network Simulation Files

This folder contains the configuration and bootstrapping scripts used
to create a simulation of 4 orgs operationing the Beatchain framework.

## Files

Static Files:
* `beatchain.sh`: Shell script used to bootstrap the Beatchain network. See `./beatchain.sh --help` for more info.
* `config-template.json`: Network configuration file template used by the Fabric Python SDK to learn the network configuration
* `configtx.yaml`: Hyperledger Fabric network configuration file
* `crypto-config.yaml`: Cryptography and certificate configuration file used to generate CA certificates and keys
* `docker-compose-base.yaml`: Base Docker Compose class for the Beatchain Peers
* `docker-compose-template.yaml`: Docker Compose template for the the full Beatchain network. The actual
    Docker Compose spec is generated using the `beatchain.sh` script by inserting keys generated by `cryptogen`
* `fabric-ca-server-config.yaml`: Fabric CA server configuration file used to set certificate authority server settings
* `peer-base.yaml`: Base Docker Compose class for all Hyperledger Fabric peers

Executing `beatchain.sh` will dynamically create a set of files used to set the configuration settings of the launched
Docker containers:
* `docker-compose.yaml`: A copy of `docker-compose-template.yaml` with temporary secret key placeholders replaced
with the filenames of the actual keys generated by `cryptogen`.
* `config.json`: A copy of `config-template.json` with temporary secret key placeholders replaced
with the filenames of the actual keys generated by `cryptogen`.
* `logs`: Directory storing the peer, orderer, and CA server logs. An invaluable source of debugging information
* `crypto-config`: Directory containing the certificate and keys generated by `cryptogen` and used by the nodes
    for authentication
* `channel-artifacts`: Directory containing the `configtxgen`-generated network artifacts: orderer bootstrap (genesis) 
block, fabric channel configuration transaction, and an anchor peer transactions block for each peer.

## Beatchain Network Execution

The Beatchain simulation network can be initialized, launched, and shut down using the `beatchain.sh` script.

#### Launching
To launch the Beatchain network, execute the following:
**Note:** To start a clean version of the network with a new set of keys and ledger, execute the
cleaning commands below before launching the network.
```shell script
./beatchain.sh up
```

#### Shutdown
To shut down the Beatchain network, execute the following:
```shell script
./beatchain.sh down
```

#### Cleaning
To reset the Beatchain network and delete the existing ledgers, use the `clean` command as follows:
**Note:** Ensure the network has been shut down before executing.
```shell script
./beatchain.sh clean
```